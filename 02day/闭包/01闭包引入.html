<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<button>测试1</button>
<button>测试2</button>
<button>测试3</button>
<script type="text/javascript">

    var btns = document.querySelectorAll("button");
    // for (var i = 0; i<btns.length;i++){
    //     btns[i].onclick = function () {
    //         alert("这是第"+i+"个");
    //     }
    // }

    //解决办法1：
    // for (var i = 0; i<btns.length;i++){
    //     btns[i].index = i;
    //     btns[i].onclick = function () {
    //         alert("这是第"+this.index+"个");
    //     }
    // }

    //使用闭包解决
    // for (var i = 0;i<btns.length;i++){
    //     (function (i) {
    //         btns[i].onclick = function () {
    //             alert("这是第"+i+"个");
    //         }
    //     })(i)
    // }
    // 1. 如何产生闭包(条件)?
    // * 函数嵌套
    // * 内部函数引用外部函数的局部变量
    // * 使用内部函数
    // 2. 闭包到底是什么?
    // * 理解一: 闭包是嵌套的内部函数(绝大部分人)
    // * 理解二: 包含被引用变量(函数)的对象(极少数人)
    // * 理解三： 所谓的闭包是一个引用关系，该引用关系存在于内部函数中，引用的是外部函数的变量的对象(深入理解)
    function f1() {
        var a = 123;
        function f2() {
            // a++;
            // console.log(a);
        }
        return f2;
    }
    var fun = f1();
    fun();//124
    fun();//125
    // 1. 延长外部函数变量对象的生命周期
    // 2. 让函数外部可以操作(读写)到函数内部的数据(变量/函数)
    // 3. 注意： 浏览器为了性能后期将外部函数中不被内部函数使用的变量清除了


</script>
</body>
</html>